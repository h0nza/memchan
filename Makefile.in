#
# This file is a Makefile for MEMCHAN.  If it has the name "Makefile.in"
# then it is a template for a Makefile;  to generate the actual Makefile,
# run "./configure", which is a configuration script generated by the
# "autoconf" program (constructs like "@foo@" will get replaced in the
# actual Makefile.
# $Id: Makefile.in,v 1.1.1.1 1996/11/15 21:37:43 aku Exp $

EXTENSION	=	Memchan
VERSION		=	@MEMCHAN_VERSION@

#----------------------------------------------------------------
# Things you can change to personalize the Makefile for your own
# site (you can make these changes in either Makefile.in or
# Makefile, but changes to Makefile will get lost if you re-run
# the configuration script).
#----------------------------------------------------------------

# Directory in which the source of this extension can be found
srcdir		=	@srcdir@

# Directories in which the tcl core can be found
TCL_INCLUDE_DIR		=	@TCL_INCLUDE_DIR@
TCL_LIB_DIR		=	@TCL_LIB_DIR@
TCL_LIB			=	@TCL_LIB@


# Default top-level directories in which to install architecture-
# specific files (exec_prefix) and machine-independent files such
# as scripts (prefix).  The values specified here may be overridden
# at configure-time with the --exec-prefix and --prefix options
# to the "configure" script.

prefix		=	@prefix@
exec_prefix	=	@exec_prefix@

# Directory containing scripts supporting the work of this makefile
tool		=	$(srcdir)/tools


# The following definition can be set to non-null for special systems
# like AFS with replication.  It allows the pathnames used for installation
# to be different than those used for actually reference files at
# run-time.  INSTALL_ROOT is prepended to $prefix and $exec_prefix
# when installing files.
INSTALL_ROOT =


# Directory in which libMEMCHAN.a is at runtime:
LIB_RUNTIME_DIR =	$(exec_prefix)/lib/$(EXTENSION)$(VERSION)


# Directory in which to install the archive libMEMCHAN.a:
LIB_INSTALL_DIR =	$(INSTALL_ROOT)$(LIB_RUNTIME_DIR)


# Directory in which to install the extended shell tclsh:
BIN_INSTALL_DIR =	$(INSTALL_ROOT)$(exec_prefix)/bin


# Directory in which to install the include file transform.h:
INCLUDE_INSTALL_DIR =	$(INSTALL_ROOT)$(prefix)/include


# Top-level directory in which to install manual entries:
MAN_INSTALL_DIR =	$(INSTALL_ROOT)$(prefix)/man


# To change the compiler switches, for example to change from -O
# to -g, change the following line:
CFLAGS		=	-O


# To disable ANSI-C procedure prototypes reverse the comment characters
# on the following lines:
PROTO_FLAGS =
#PROTO_FLAGS = -DNO_PROTOTYPE


# To enable memory debugging reverse the comment characters on the following
# lines.  Warning:  if you enable memory debugging, you must do it
# *everywhere*, including all the code that calls Tcl, and you must use
# ckalloc and ckfree everywhere instead of malloc and free.
MEM_DEBUG_FLAGS =
#MEM_DEBUG_FLAGS = -DTCL_MEM_DEBUG


# Some versions of make, like SGI's, use the following variable to
# determine which shell to use for executing commands:
SHELL =		/bin/sh


# Tcl used to let the configure script choose which program to use
# for installing, but there are just too many different versions of
# "install" around;  better to use the install-sh script that comes
# with the distribution, which is slower but guaranteed to work.

INSTALL = $(tool)/install-sh -c


# The symbols below provide support for dynamic loading and shared
# libraries.  The values of the symbols are normally set by the
# configure script.  You shouldn't normally need to modify any of
# these definitions by hand.

MEMCHAN_SHLIB_CFLAGS = @MEMCHAN_SHLIB_CFLAGS@


# The symbol below provides support for dynamic loading and shared
# libraries.  See configure.in for a description of what it means.
# The values of the symbolis normally set by the configure script.

SHLIB_LD = @SHLIB_LD@


# Libraries to use when linking:  must include at least the dynamic
# loading library and the math library (in that order).  This
# definition is determined by the configure script.
LIBS = @TCL_LIB_SPEC@ @TCL_LIBS@ @LIBS@ -lc

MEMCHAN_LIB_FILE = @MEMCHAN_LIB_FILE@
#MEMCHAN_LIB_FILE = libMEMCHAN.a

#----------------------------------------------------------------
# The information below is modified by the configure script when
# Makefile is generated from Makefile.in.  You shouldn't normally
# modify any of this stuff by hand.
#----------------------------------------------------------------

INSTALL_PROGRAM =	$(INSTALL) -m 744
INSTALL_DATA =		$(INSTALL) -m 644
RANLIB =		@RANLIB@

#----------------------------------------------------------------
# The information below should be usable as is.  The configure
# script won't modify it and you shouldn't need to modify it
# either.
#----------------------------------------------------------------

CC		=	@CC@

CC_SWITCHES	=	$(CFLAGS) $(MEMCHAN_SHLIB_CFLAGS) $(CPPFLAGS) -DMEMCHAN_VERSION=\"$(VERSION)\"
# $(TCL_CC_SWITCHES)
CPPFLAGS	=	$(DEFINES) $(INCLUDES)

INCLUDES	=	-I. -I$(srcdir) -I$(TCL_INCLUDE_DIR)
DEFINES		=	$(PROTO_FLAGS) $(MEM_DEBUG_FLAGS) @DEFS@

HEADER		=	

SOURCES		=	memchan.c
OBJECTS		=	memchan.o


#-------------------------------------------------------#

all:	library

clean:
	rm -f $(OBJECTS) $(MEMCHAN_LIB_FILE)
	rm -f TAGS *~ */*~ core*

distclean:	clean
	rm -f config.status config.cache config.log Makefile pkgIndex

install:	install-lib @install_other@

install-lib: $(MEMCHAN_LIB_FILE)
	$(tool)/mkinstalldirs $(LIB_INSTALL_DIR)
	@echo "Installing $(MEMCHAN_LIB_FILE)"
	@$(INSTALL_DATA) $(MEMCHAN_LIB_FILE) $(LIB_INSTALL_DIR)
	@$(RANLIB) $(LIB_INSTALL_DIR)/$(MEMCHAN_LIB_FILE)
	@$(INSTALL_DATA) $(srcdir)/pkgIndex $(LIB_INSTALL_DIR)/pkgIndex.tcl

#-------------------------------------------------------#

lib:	library

library:	$(MEMCHAN_LIB_FILE)
	@echo ... done

#-------------------------------------------------------#

TAGS:
		etags *.[ch]

.c.o:
	$(CC) -c $(CC_SWITCHES) $< -o $@

#-------------------------------------------------------#

$(MEMCHAN_LIB_FILE):	$(OBJECTS)
	rm -f		$(MEMCHAN_LIB_FILE)
	@MAKE_LIB@
	$(RANLIB)	$(MEMCHAN_LIB_FILE)

#-------------------------------------------------------#
# DO NOT DELETE THIS LINE -- make depend depends on it.
